---
// src/components/Testimonios.astro
const testimonios = [
  {
    cita: "Entender mi plan de retiro parecía imposible hasta que hablé con Abel. Me quitó un peso de encima y ahora sé que mi futuro está en buenas manos. Su claridad y paciencia no tienen precio.",
    autor: "Ana L. - Emprendedora",
  },
  {
    cita: "Cuando nació mi hija, asegurar su futuro se volvió mi prioridad. Abel no solo me ofreció un producto, me dio una estrategia completa. Más que un agente, lo siento como un aliado.",
    autor: "Javier M. - Ingeniero",
  },
  {
    cita: "Nadie quiere pensar en un accidente, pero tener un seguro de gastos médicos mayores con la asesoría de Abel nos dio una tranquilidad inmensa. Cuando lo necesitamos, todo funcionó sin problemas.",
    autor: "Familia Ramírez",
  },
  {
    cita: "Después de años de trabajar sin protección, Abel me abrió los ojos sobre la importancia de tener un seguro de vida. Ahora mi familia está protegida y puedo dormir tranquilo.",
    autor: "Carlos R. - Profesor",
  },
  {
    cita: "La asesoría patrimonial de Abel transformó completamente mi perspectiva financiera. No solo me protegió, me enseñó a hacer crecer mi dinero de manera inteligente.",
    autor: "María S. - Médica",
  }
]
---
<section id="testimonios" class="testimonials-section">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <span class="subtitle">CONFIANZA</span>
            <h2>Historias Reales, Resultados Reales</h2>
            <p>La tranquilidad de mis clientes es mi mayor satisfacción.</p>
        </div>
        <div class="testimonials-container">
            <div class="testimonials-track">
                {testimonios.map((testimonio, index) => (
                    <div class="testimonial-card animate-on-scroll" data-delay={index * 0.1}>
                        <p class="quote">"{testimonio.cita}"</p>
                        <p class="author">— {testimonio.autor}</p>
                    </div>
                ))}
                {/* Duplicar les témoignages pour un défilement infini */}
                {testimonios.map((testimonio, index) => (
                    <div class="testimonial-card animate-on-scroll" data-delay={index * 0.1}>
                        <p class="quote">"{testimonio.cita}"</p>
                        <p class="author">— {testimonio.autor}</p>
                    </div>
                ))}
            </div>
        </div>
    </div>
</section>

<style>
    .testimonials-section {
        padding: 6rem 1.5rem;
        background-color: #ffffff;
        overflow: hidden;
    }
    .container {
        max-width: 1200px;
        margin: 0 auto;
    }
    .section-header {
        text-align: center;
        margin-bottom: 4rem;
    }
    .subtitle {
        display: inline-block;
        margin-bottom: 0.5rem;
        padding: 0.25rem 0.75rem;
        background-color: #e9ecef;
        color: #495057;
        font-size: 0.875rem;
        font-weight: 700;
        border-radius: 99px;
    }
    .section-header h2 {
        font-size: 2.75rem;
        font-weight: 900;
        margin-bottom: 1rem;
        color: #212529;
    }
    .section-header p {
        font-size: 1.125rem;
        color: #495057;
        max-width: 650px;
        margin: 0 auto;
    }
    .testimonials-container {
        overflow: hidden;
        position: relative;
    }
    .testimonials-track {
        display: flex;
        gap: 2rem;
        animation: scroll-testimonials 60s linear infinite;
        width: max-content;
    }
    .testimonial-card {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        padding: 2.5rem;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        min-width: 280px;
        max-width: 280px;
        min-height: 200px;
        opacity: 0;
        transform: translateY(30px);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .testimonial-card.animate-in {
        opacity: 1;
        transform: translateY(0);
    }
    .testimonial-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .quote {
        font-size: 1rem;
        line-height: 1.6;
        font-style: italic;
        color: #343a40;
        flex-grow: 1;
        margin: 0 0 1.5rem 0;
    }
    .author {
        font-weight: 700;
        color: #0052FF;
        text-align: right;
        margin: 0;
    }

    @keyframes scroll-testimonials {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-50%);
        }
    }

    /* Pause animation on hover */
    .testimonials-track:hover {
        animation-play-state: paused;
    }

    /* ========== MOBILE MEDIA QUERY (max-width: 768px) ========== */
    @media (max-width: 768px) {
        .testimonials-track {
            animation-duration: 40s;
        }
        
        .testimonial-card {
            min-width: 250px;
            max-width: 250px;
            min-height: 180px;
            padding: 2rem;
        }

        .quote {
            font-size: 0.9rem;
        }

        .section-header h2 {
            font-size: 2rem;
        }

        .section-header p {
            font-size: 1rem;
        }
    }
</style>

<script>
    // Animation d'entrée au scroll
    function animateOnScroll() {
        const elements = document.querySelectorAll('.animate-on-scroll');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const element = entry.target as HTMLElement;
                    const delay = parseInt(element.dataset.delay || '0');
                    
                    setTimeout(() => {
                        element.classList.add('animate-in');
                    }, delay * 1000);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });
        
        elements.forEach(element => {
            observer.observe(element);
        });
    }
    
    // Initialiser les animations
    document.addEventListener('DOMContentLoaded', animateOnScroll);
</script>


